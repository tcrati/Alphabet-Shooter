<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Alphabet Shooter</title>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #1a1a1a;
            --accent-color: #000000;
            --dim-color: #888888;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            transition: background-color 0.3s;
        }

        #stats {
            position: absolute;
            top: 40px;
            display: flex;
            gap: 40px;
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .stat-item span {
            font-weight: bold;
            display: block;
            font-size: 1.5rem;
            text-align: center;
        }

        #game-area {
            position: relative;
            width: 100vw;
            height: 100vh;
            cursor: crosshair;
        }

        .letter {
            position: absolute;
            font-size: 2.5rem;
            font-weight: 300;
            transform: translate(-50%, -50%);
            transition: opacity 0.2s, transform 0.2s;
            user-select: none;
        }

        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        h1 {
            font-weight: 200;
            font-size: 3rem;
            margin-bottom: 10px;
            letter-spacing: 5px;
        }

        p { color: var(--dim-color); margin-bottom: 30px; }

        button {
            background: none;
            border: 1px solid var(--accent-color);
            padding: 12px 40px;
            font-size: 1rem;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            background: var(--accent-color);
            color: var(--bg-color);
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="stats">
        <div class="stat-item">Time <span id="timer">60</span></div>
        <div class="stat-item">Score <span id="score">0</span></div>
    </div>

    <div id="game-area"></div>

    <div id="overlay">
        <h1 id="title">ALPHABET</h1>
        <p id="result-text">กดปุ่มตัวอักษรบนคีย์บอร์ดให้ตรงกับที่ปรากฏ</p>
        <button onclick="startGame()">START GAME</button>
    </div>

    <script>
        const gameArea = document.getElementById('game-area');
        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const overlay = document.getElementById('overlay');
        const resultText = document.getElementById('result-text');

        let score = 0;
        let timeLeft = 60;
        let gameActive = false;
        let letters = [];
        let timerInterval;

        // --- ระบบเสียง (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(freq, type, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        const sounds = {
            correct: () => playSound(880, 'sine', 0.1),
            wrong: () => playSound(150, 'sawtooth', 0.1),
            start: () => playSound(440, 'sine', 0.3),
            end: () => playSound(220, 'sine', 0.5)
        };

        // --- ระบบเกม ---
        function createLetter() {
            const char = String.fromCharCode(65 + Math.floor(Math.random() * 26));
            const el = document.createElement('div');
            el.className = 'letter';
            el.innerText = char;
            
            // สุ่มตำแหน่งให้อยู่ในช่วง 10%-90% ของหน้าจอ เพื่อไม่ให้ชิดขอบเกินไป
            const x = 10 + Math.random() * 80;
            const y = 20 + Math.random() * 70;
            
            el.style.left = `${x}%`;
            el.style.top = `${y}%`;
            
            gameArea.appendChild(el);
            return { char, el };
        }

        function spawnLetters() {
            gameArea.innerHTML = '';
            letters = [];
            for (let i = 0; i < 3; i++) {
                letters.push(createLetter());
            }
        }

        function startGame() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            sounds.start();
            
            score = 0;
            timeLeft = 60;
            gameActive = true;
            scoreEl.innerText = score;
            timerEl.innerText = timeLeft;
            overlay.classList.add('hidden');
            
            spawnLetters();

            timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.innerText = timeLeft;
                if (timeLeft <= 0) endGame();
            }, 1000);
        }

        function endGame() {
            gameActive = false;
            clearInterval(timerInterval);
            sounds.end();
            overlay.classList.remove('hidden');
            document.getElementById('title').innerText = "FINISH";
            resultText.innerText = `SCORE: ${score}`;
        }

        window.addEventListener('keydown', (e) => {
            if (!gameActive) return;

            const key = e.key.toUpperCase();
            const index = letters.findIndex(l => l.char === key);

            if (index !== -1) {
                sounds.correct();
                letters[index].el.style.opacity = '0';
                letters[index].el.style.transform = 'translate(-50%, -50%) scale(2)';
                
                setTimeout(() => {
                    if (!gameActive) return;
                    letters[index].el.remove();
                    letters.splice(index, 1);
                    letters.push(createLetter());
                }, 100);

                score++;
                scoreEl.innerText = score;
            } else {
                // กดผิด (Optional: จะหักคะแนนหรือมีเสียงเตือนก็ได้)
                if(e.key.length === 1) sounds.wrong();
            }
        });
    </script>
</body>
</html>
